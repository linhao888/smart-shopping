"use strict";(self["webpackChunksmart_shopping"]=self["webpackChunksmart_shopping"]||[]).push([[108],{9464:function(s,t,a){a.d(t,{A:function(){return l}});var i=function(){var s=this,t=s._self._c;return t("div",{staticClass:"header-nav-components",attrs:{id:"header-nav-components"}},[t("div",{staticClass:"left",on:{click:function(t){return s.$router.go(-1)}}},[t("van-icon",{attrs:{name:"arrow-left",size:"4vh",color:"gray"}}),t("span",[s._v("返回")])],1),t("span",{staticClass:"mid-title"},[s._v("搜索")])])},o=[],n={},e=n,c=a(1656),r=(0,c.A)(e,i,o,!1,null,"28e53f38",null),l=r.exports},2108:function(s,t,a){a.r(t),a.d(t,{default:function(){return g}});a(4114);var i=function(){var s=this,t=s._self._c;return t("div",{staticClass:"detail-box"},[t("HeadNavVue"),t("div",{staticClass:"bottom-nav",attrs:{id:"prodetail-bottom-nav"}},[t("div",{on:{click:function(t){return s.$router.push("/home")}}},[t("van-icon",{attrs:{name:"wap-home-o",size:"30px"}}),t("span",{staticClass:"title"},[s._v("首页")])],1),t("div",{on:{click:function(t){return s.$router.push("/cart")}}},[s.cartTotalGoods>0?t("span",{staticClass:"num"},[s._v(" "+s._s(s.cartTotalGoods))]):s._e(),t("van-icon",{attrs:{name:"cart-o",size:"30px"}}),t("span",{staticClass:"title"},[s._v("购物车")])],1),t("span",{staticClass:"left",on:{click:function(t){return s.pushCart()}}},[s._v("加入购物车")]),t("span",{staticClass:"right",on:{click:function(t){return s.pushBuy()}}},[s._v("立即购买")])]),t("van-action-sheet",{attrs:{title:s.showTitle},model:{value:s.show,callback:function(t){s.show=t},expression:"show"}},[t("div",{staticClass:"product"},[t("div",{staticClass:"product-title"},[t("div",{staticClass:"left"},[t("img",{attrs:{src:s.goodsList.goods_image,alt:""}})]),t("div",{staticClass:"right"},[t("div",{staticClass:"price"},[t("span",[s._v("¥")]),t("span",{staticClass:"nowprice"},[s._v(s._s(s.goodsList.goods_price_min))])]),t("div",{staticClass:"count"},[t("span",[s._v("库存")]),t("span",[s._v(s._s(s.goodsList.stock_total))])])])]),t("div",{staticClass:"num-box"},[t("span",[s._v("数量")]),t("CountBoxVue",{model:{value:s.goodsCount,callback:function(t){s.goodsCount=t},expression:"goodsCount"}})],1),s.goodsList.stock_total>0?t("div",{staticClass:"showbtn"},["加入购物车"===s.showTitle?t("div",{staticClass:"btn",on:{click:s.addCart}},[s._v(" 加入购物车 ")]):t("div",{staticClass:"btn now",on:{click:s.buyNow}},[s._v("立刻购买")])]):t("div",{staticClass:"btn-none"},[s._v("该商品已抢完")])])]),s.goodsList?t("div",{staticClass:"swipe"},[t("van-swipe",{staticClass:"my-swipe",attrs:{autoplay:5e3,"indicator-color":"white"}},s._l(s.goodsList.goods_images,(function(s){return t("van-swipe-item",{key:s.file_id},[t("img",{staticClass:"swipe-img",attrs:{src:s.external_url,alt:""}})])})),1)],1):s._e(),t("div",{staticClass:"price"},[t("span",{staticClass:"now-price"},[s._v("￥"+s._s(s.goodsList.goods_price_min))]),t("span",{staticClass:"pre-price"},[s._v("￥"+s._s(s.goodsList.goods_price_min))]),t("span",{staticClass:"sales"},[s._v("已售 "+s._s(s.goodsList.goods_sales)+" 件")])]),t("div",{staticClass:"content text-ellipsis-2"},[t("p",[s._v(" "+s._s(s.goodsList.goods_name)+" ")])]),t("div",{staticClass:"promise"},[t("span",[t("van-icon",{attrs:{name:"passed",color:"red"}})],1),t("span",[s._v("七天无理由退货")]),t("span",[t("van-icon",{attrs:{name:"passed",color:"red"}})],1),t("span",[s._v("48小时发货")]),t("span",{staticClass:"right"},[t("van-icon",{attrs:{name:"arrow"}})],1)]),s.discussList?t("div",{staticClass:"discuss"},[t("div",{staticClass:"discuss-nav"},[t("span",[s._v("商品评论("+s._s(s.limit)+"条)")]),t("span",[s._v("查看更多"),t("van-icon",{attrs:{name:"arrow"}})],1)]),t("ul",{staticClass:"discuss-content"},s._l(s.discussList,(function(a){return t("li",{key:a.comment_id,staticClass:"items"},[t("div",{staticClass:"top"},[t("img",{attrs:{src:a.user.avatar_url||s.defaultImg,alt:""}}),t("span",[s._v(s._s(a.user.nick_name))]),t("van-rate",{attrs:{value:a.score/2,color:"#ffd700",size:"18px"}})],1),t("p",{staticClass:"text-ellipsis-2"},[s._v(" "+s._s(a.content)+" ")]),t("div",{staticClass:"bottom"},[t("span",[s._v(s._s(a.create_time))])])])})),0)]):s._e(),t("div",{staticClass:"desc",domProps:{innerHTML:s._s(s.goodsList.content)}}),t("div",{staticClass:"page-bottom"})],1)},o=[],n=a(5720);const e=s=>n.A.get("/goods/detail",{params:{goodsId:s}}),c=(s,t)=>n.A.get("/comment/listRows",{params:{goodsId:s,limit:t}});var r=a(7767),l=a(261),d=a(9652),u={data(){return{dodoti:"mixins, hi"}},methods:{isToken(s){s||this.$dialog.confirm({title:"登录提醒",message:"您还未登陆账号, 请前往登录",confirmButtonText:"前往登陆"}).then((()=>{this.$router.push({path:"/login",query:{backUrl:this.$route.fullPath}})})).catch((()=>{}))}}},p=a(9464),v={name:"ProdetailIndex",mixins:[u],data(){return{rate:5,goodsList:{},limit:5,discussList:[],defaultImg:r,show:!1,showTitle:"加入购物车",goodsCount:1,cartTotalGoods:0}},components:{CountBoxVue:l.A,HeadNavVue:p.A},async created(){const s=this.$route.params.id,t=await e(s);this.goodsList=t.data.detail;const a=await c(s,this.limit);this.discussList=a.data.list,console.log(this.goodsList)},methods:{pushCart(){this.showTitle="加入购物车",this.show=!0},pushBuy(){this.showTitle="立即购买",this.show=!0},async addCart(){const s=this.$store.state.user.userInfo.token;if(s){const s=this.$route.params.id,t=this.goodsList.skuList[0].goods_sku_id,a=await(0,d.Xd)(s,this.goodsCount,t);this.cartTotalGoods=a.data.cartTotal>99?"99+":a.data.cartTotal,this.$toast("加入购物车成功"),this.show=!1}else this.isToken(s)},async buyNow(){const s=this.$store.state.user.userInfo.token;s?this.$router.push({path:"/pay",query:{mode:"buyNow",goodsId:this.goodsList.goods_id,goodsSkuId:0,goodsNum:this.goodsCount}}):this.isToken(s)}}},h=v,_=a(1656),m=(0,_.A)(h,i,o,!1,null,"20f10529",null),g=m.exports}}]);
//# sourceMappingURL=108.bb5dde5b.js.map