{"version":3,"file":"js/264.fb120930.js","mappings":"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","sources":["webpack://smart-shopping/./src/views/prodetail/index.vue","webpack://smart-shopping/./src/api/product.js","webpack://smart-shopping/./src/mixins/loginConfirm.js","webpack://smart-shopping/src/views/prodetail/index.vue","webpack://smart-shopping/./src/views/prodetail/index.vue?f133","webpack://smart-shopping/./src/views/prodetail/index.vue?3c54"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"detail-box\"},[_c('van-nav-bar',{attrs:{\"title\":\"商品详情\",\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":function($event){return _vm.$router.go(-1)}}}),_c('div',{staticClass:\"bottom-nav\"},[_c('div',{on:{\"click\":function($event){return _vm.$router.push('/home')}}},[_c('van-icon',{attrs:{\"name\":\"wap-home-o\",\"size\":\"30px\"}}),_c('span',{staticClass:\"title\"},[_vm._v(\"首页\")])],1),_c('div',{on:{\"click\":function($event){return _vm.$router.push('/cart')}}},[(_vm.cartTotalGoods > 0)?_c('span',{staticClass:\"num\"},[_vm._v(\" \"+_vm._s(_vm.cartTotalGoods))]):_vm._e(),_c('van-icon',{attrs:{\"name\":\"cart-o\",\"size\":\"30px\"}}),_c('span',{staticClass:\"title\"},[_vm._v(\"购物车\")])],1),_c('span',{staticClass:\"left\",on:{\"click\":function($event){return _vm.pushCart()}}},[_vm._v(\"加入购物车\")]),_c('span',{staticClass:\"right\",on:{\"click\":function($event){return _vm.pushBuy()}}},[_vm._v(\"立即购买\")])]),_c('van-action-sheet',{attrs:{\"title\":_vm.showTitle},model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}},[_c('div',{staticClass:\"product\"},[_c('div',{staticClass:\"product-title\"},[_c('div',{staticClass:\"left\"},[_c('img',{attrs:{\"src\":_vm.goodsList.goods_image,\"alt\":\"\"}})]),_c('div',{staticClass:\"right\"},[_c('div',{staticClass:\"price\"},[_c('span',[_vm._v(\"¥\")]),_c('span',{staticClass:\"nowprice\"},[_vm._v(_vm._s(_vm.goodsList.goods_price_min))])]),_c('div',{staticClass:\"count\"},[_c('span',[_vm._v(\"库存\")]),_c('span',[_vm._v(_vm._s(_vm.goodsList.stock_total))])])])]),_c('div',{staticClass:\"num-box\"},[_c('span',[_vm._v(\"数量\")]),_c('CountBoxVue',{model:{value:(_vm.goodsCount),callback:function ($$v) {_vm.goodsCount=$$v},expression:\"goodsCount\"}})],1),(_vm.goodsList.stock_total > 0)?_c('div',{staticClass:\"showbtn\"},[(_vm.showTitle === '加入购物车')?_c('div',{staticClass:\"btn\",on:{\"click\":_vm.addCart}},[_vm._v(\" 加入购物车 \")]):_c('div',{staticClass:\"btn now\",on:{\"click\":_vm.buyNow}},[_vm._v(\"立刻购买\")])]):_c('div',{staticClass:\"btn-none\"},[_vm._v(\"该商品已抢完\")])])]),(_vm.goodsList)?_c('div',{staticClass:\"swipe\"},[_c('van-swipe',{staticClass:\"my-swipe\",attrs:{\"autoplay\":5000,\"indicator-color\":\"white\"}},_vm._l((_vm.goodsList.goods_images),function(item){return _c('van-swipe-item',{key:item.file_id},[_c('img',{staticClass:\"swipe-img\",attrs:{\"src\":item.external_url,\"alt\":\"\"}})])}),1)],1):_vm._e(),_c('div',{staticClass:\"price\"},[_c('span',{staticClass:\"now-price\"},[_vm._v(\"￥\"+_vm._s(_vm.goodsList.goods_price_min))]),_c('span',{staticClass:\"pre-price\"},[_vm._v(\"￥\"+_vm._s(_vm.goodsList.goods_price_min))]),_c('span',{staticClass:\"sales\"},[_vm._v(\"已售 \"+_vm._s(_vm.goodsList.goods_sales)+\" 件\")])]),_c('div',{staticClass:\"content text-ellipsis-2\"},[_c('p',[_vm._v(\" \"+_vm._s(_vm.goodsList.goods_name)+\" \")])]),_c('div',{staticClass:\"promise\"},[_c('span',[_c('van-icon',{attrs:{\"name\":\"passed\",\"color\":\"red\"}})],1),_c('span',[_vm._v(\"七天无理由退货\")]),_c('span',[_c('van-icon',{attrs:{\"name\":\"passed\",\"color\":\"red\"}})],1),_c('span',[_vm._v(\"48小时发货\")]),_c('span',{staticClass:\"right\"},[_c('van-icon',{attrs:{\"name\":\"arrow\"}})],1)]),(_vm.discussList)?_c('div',{staticClass:\"discuss\"},[_c('div',{staticClass:\"discuss-nav\"},[_c('span',[_vm._v(\"商品评论(\"+_vm._s(_vm.limit)+\"条)\")]),_c('span',[_vm._v(\"查看更多\"),_c('van-icon',{attrs:{\"name\":\"arrow\"}})],1)]),_c('ul',{staticClass:\"discuss-content\"},_vm._l((_vm.discussList),function(item){return _c('li',{key:item.comment_id,staticClass:\"items\"},[_c('div',{staticClass:\"top\"},[_c('img',{attrs:{\"src\":item.user.avatar_url || _vm.defaultImg,\"alt\":\"\"}}),_c('span',[_vm._v(_vm._s(item.user.nick_name))]),_c('van-rate',{attrs:{\"value\":item.score / 2,\"color\":\"#ffd700\",\"size\":\"18px\"}})],1),_c('p',{staticClass:\"text-ellipsis-2\"},[_vm._v(\" \"+_vm._s(item.content)+\" \")]),_c('div',{staticClass:\"bottom\"},[_c('span',[_vm._v(_vm._s(item.create_time))])])])}),0)]):_vm._e(),_c('div',{staticClass:\"desc\",domProps:{\"innerHTML\":_vm._s(_vm.goodsList.content)}}),_c('div',{staticClass:\"page-bottom\"})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from '@/utils/request.js'\r\n\r\nexport const getProductDetail = (goodsId) => {\r\n  return request.get('/goods/detail', { params: { goodsId } })\r\n}\r\n\r\nexport const getDiscussData = (goodsId, limit) => {\r\n  return request.get('/comment/listRows', { params: { goodsId, limit } })\r\n}\r\n","export default {\r\n  data () {\r\n    return {\r\n      dodoti: 'mixins, hi'\r\n    }\r\n  },\r\n  methods: {\r\n    isToken (token) {\r\n      if (!token) {\r\n        this.$dialog\r\n          .confirm({\r\n            title: '登录提醒',\r\n            message: '您还未登陆账号, 请前往登录',\r\n            confirmButtonText: '前往登陆'\r\n          })\r\n          .then(() => {\r\n            // on confirm\r\n            this.$router.push({\r\n              path: '/login',\r\n              query: {\r\n                backUrl: this.$route.fullPath\r\n              }\r\n            })\r\n          })\r\n          .catch(() => {\r\n            // on cancel\r\n          })\r\n      }\r\n    }\r\n\r\n  }\r\n}\r\n","<template>\r\n  <div class=\"detail-box\">\r\n    <!-- nav区域 -->\r\n    <van-nav-bar\r\n      title=\"商品详情\"\r\n      left-text=\"返回\"\r\n      left-arrow\r\n      @click-left=\"$router.go(-1)\"\r\n    />\r\n\r\n    <!-- 底部购物车栏 -->\r\n    <div class=\"bottom-nav\">\r\n      <div @click=\"$router.push('/home')\">\r\n        <van-icon name=\"wap-home-o\" size=\"30px\" />\r\n        <span class=\"title\">首页</span>\r\n      </div>\r\n      <div @click=\"$router.push('/cart')\">\r\n        <!-- 购物车小图标 -->\r\n        <span class=\"num\" v-if=\"cartTotalGoods > 0\"> {{ cartTotalGoods }}</span>\r\n        <van-icon name=\"cart-o\" size=\"30px\" />\r\n        <span class=\"title\">购物车</span>\r\n      </div>\r\n      <span class=\"left\" @click=\"pushCart()\">加入购物车</span>\r\n      <span class=\"right\" @click=\"pushBuy()\">立即购买</span>\r\n    </div>\r\n\r\n    <!-- 购物车与购买弹出框 -->\r\n    <van-action-sheet v-model=\"show\" :title=\"showTitle\">\r\n      <div class=\"product\">\r\n        <div class=\"product-title\">\r\n          <div class=\"left\">\r\n            <img :src=\"goodsList.goods_image\" alt=\"\" />\r\n          </div>\r\n          <div class=\"right\">\r\n            <div class=\"price\">\r\n              <span>¥</span>\r\n              <span class=\"nowprice\">{{ goodsList.goods_price_min }}</span>\r\n            </div>\r\n            <div class=\"count\">\r\n              <span>库存</span>\r\n              <span>{{ goodsList.stock_total }}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"num-box\">\r\n          <span>数量</span>\r\n          <CountBoxVue v-model=\"goodsCount\"></CountBoxVue>\r\n        </div>\r\n        <div class=\"showbtn\" v-if=\"goodsList.stock_total > 0\">\r\n          <div class=\"btn\" v-if=\"showTitle === '加入购物车'\" @click=\"addCart\">\r\n            加入购物车\r\n          </div>\r\n          <div class=\"btn now\" v-else @click=\"buyNow\">立刻购买</div>\r\n        </div>\r\n        <div class=\"btn-none\" v-else>该商品已抢完</div>\r\n      </div>\r\n    </van-action-sheet>\r\n\r\n    <!-- 轮播图 -->\r\n    <div class=\"swipe\" v-if=\"goodsList\">\r\n      <van-swipe class=\"my-swipe\" :autoplay=\"5000\" indicator-color=\"white\">\r\n        <van-swipe-item\r\n          v-for=\"item in goodsList.goods_images\"\r\n          :key=\"item.file_id\"\r\n        >\r\n          <img :src=\"item.external_url\" alt=\"\" class=\"swipe-img\" />\r\n        </van-swipe-item>\r\n      </van-swipe>\r\n    </div>\r\n\r\n    <!-- 价格与销量栏 -->\r\n    <div class=\"price\">\r\n      <span class=\"now-price\">￥{{ goodsList.goods_price_min }}</span>\r\n      <span class=\"pre-price\">￥{{ goodsList.goods_price_min }}</span>\r\n      <span class=\"sales\">已售 {{ goodsList.goods_sales }} 件</span>\r\n    </div>\r\n\r\n    <!-- 标题内容栏 -->\r\n    <div class=\"content text-ellipsis-2\">\r\n      <p>\r\n        {{ goodsList.goods_name }}\r\n      </p>\r\n    </div>\r\n\r\n    <!-- 商品保障描述 -->\r\n    <div class=\"promise\">\r\n      <span><van-icon name=\"passed\" color=\"red\" /></span>\r\n      <span>七天无理由退货</span>\r\n      <span><van-icon name=\"passed\" color=\"red\" /></span>\r\n      <span>48小时发货</span>\r\n      <span class=\"right\"><van-icon name=\"arrow\" /></span>\r\n    </div>\r\n\r\n    <!-- 评论 -->\r\n    <div class=\"discuss\" v-if=\"discussList\">\r\n      <!-- 顶部导航 -->\r\n      <div class=\"discuss-nav\">\r\n        <span>商品评论({{ limit }}条)</span>\r\n        <span>查看更多<van-icon name=\"arrow\" /></span>\r\n      </div>\r\n      <!-- 内容区域 -->\r\n      <ul class=\"discuss-content\">\r\n        <li class=\"items\" v-for=\"item in discussList\" :key=\"item.comment_id\">\r\n          <div class=\"top\">\r\n            <img :src=\"item.user.avatar_url || defaultImg\" alt=\"\" />\r\n            <span>{{ item.user.nick_name }}</span>\r\n            <van-rate :value=\"item.score / 2\" color=\"#ffd700\" size=\"18px\" />\r\n          </div>\r\n          <p class=\"text-ellipsis-2\">\r\n            {{ item.content }}\r\n          </p>\r\n          <div class=\"bottom\">\r\n            <span>{{ item.create_time }}</span>\r\n          </div>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n\r\n    <!-- 商品描述 -->\r\n    <div class=\"desc\" v-html=\"goodsList.content\"></div>\r\n    <!-- 底部留白 -->\r\n    <div class=\"page-bottom\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getProductDetail, getDiscussData } from '@/api/product.js'\r\nimport defaultImg from '@/assets/default-avatar.png'\r\nimport CountBoxVue from '@/components/CountBox.vue'\r\nimport { getCartData } from '@/api/cart.js'\r\nimport loginConfirm from '@/mixins/loginConfirm.js'\r\n\r\nexport default {\r\n  name: 'ProdetailIndex',\r\n  mixins: [loginConfirm],\r\n  data () {\r\n    return {\r\n      rate: 5,\r\n      goodsList: {},\r\n      limit: 5, // 评论显示的数量\r\n      discussList: [],\r\n      defaultImg,\r\n      show: false, // 购物车弹出框是否弹出\r\n      showTitle: '加入购物车',\r\n      goodsCount: 1, // 默认购物车1个商品\r\n      cartTotalGoods: 0\r\n    }\r\n  },\r\n  components: {\r\n    CountBoxVue\r\n  },\r\n  async created () {\r\n    const goodsId = this.$route.params.id\r\n    const res = await getProductDetail(goodsId)\r\n    this.goodsList = res.data.detail\r\n    const discussRes = await getDiscussData(goodsId, this.limit)\r\n    this.discussList = discussRes.data.list\r\n    console.log(this.goodsList)\r\n  },\r\n  methods: {\r\n    // 点击加入购物车弹出框\r\n    pushCart () {\r\n      this.showTitle = '加入购物车'\r\n      this.show = true\r\n    },\r\n    // 点击加入购买弹出框\r\n    pushBuy () {\r\n      this.showTitle = '立即购买'\r\n      this.show = true\r\n    },\r\n\r\n    // 加入购物车\r\n    async addCart () {\r\n      const token = this.$store.state.user.userInfo.token\r\n      if (!token) {\r\n        this.isToken(token)\r\n      } else {\r\n        const goodsId = this.$route.params.id\r\n        const goodsSku = this.goodsList.skuList[0].goods_sku_id\r\n        const res = await getCartData(goodsId, this.goodsCount, goodsSku)\r\n        this.cartTotalGoods = res.data.cartTotal > 99 ? '99+' : res.data.cartTotal\r\n        this.$toast('加入购物车成功')\r\n        this.show = false\r\n      }\r\n    },\r\n\r\n    // 立即购买\r\n    async buyNow () {\r\n      const token = this.$store.state.user.userInfo.token\r\n      if (!token) {\r\n        this.isToken(token)\r\n        return\r\n      }\r\n      this.$router.push({\r\n        path: '/pay',\r\n        query: {\r\n          mode: 'buyNow',\r\n          goodsId: this.goodsList.goods_id,\r\n          goodsSkuId: 0,\r\n          goodsNum: this.goodsCount\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.detail-box {\r\n  .bottom-nav {\r\n    position: fixed;\r\n    display: flex;\r\n    z-index: 999;\r\n    bottom: 0;\r\n    height: 50px;\r\n    width: 100%;\r\n    background-color: #fff;\r\n    div {\r\n      width: 15%;\r\n      text-align: center;\r\n      position: relative;\r\n      .num {\r\n        position: absolute;\r\n        text-align: center;\r\n        width: 25px;\r\n        background-color: #f00;\r\n        color: #eee;\r\n        border-radius: 8px;\r\n        right: 0;\r\n        top: -5px;\r\n        z-index: 999;\r\n      }\r\n      .title {\r\n        display: block;\r\n      }\r\n    }\r\n    > span {\r\n      display: block;\r\n      width: 35%;\r\n      text-align: center;\r\n      line-height: 50px;\r\n      font-size: 18px;\r\n      border-radius: 60px;\r\n    }\r\n    .left {\r\n      background-color: orange;\r\n    }\r\n    .right {\r\n      background-color: rgb(255, 55, 55);\r\n    }\r\n  }\r\n  .product {\r\n    .product-title {\r\n      display: flex;\r\n      .left {\r\n        img {\r\n          width: 90px;\r\n          height: 90px;\r\n        }\r\n        margin: 10px;\r\n      }\r\n      .right {\r\n        flex: 1;\r\n        padding: 10px;\r\n        .price {\r\n          font-size: 14px;\r\n          color: #fe560a;\r\n          .nowprice {\r\n            font-size: 24px;\r\n            margin: 0 5px;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .num-box {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      padding: 10px;\r\n      align-items: center;\r\n    }\r\n    .btn,\r\n    .btn-none {\r\n      height: 40px;\r\n      line-height: 40px;\r\n      margin: 20px;\r\n      border-radius: 20px;\r\n      text-align: center;\r\n      color: rgb(255, 255, 255);\r\n      background-color: rgb(255, 148, 2);\r\n    }\r\n    .btn.now {\r\n      background-color: #fe5630;\r\n    }\r\n    .btn-none {\r\n      background-color: #cccccc;\r\n    }\r\n  }\r\n  .swipe {\r\n    .my-swipe .van-swipe-item {\r\n      color: #fff;\r\n      font-size: 20px;\r\n      line-height: 150px;\r\n      text-align: center;\r\n      background-color: #39a9ed;\r\n      .swipe-img {\r\n        width: 100%;\r\n        object-fit: cover;\r\n        display: block;\r\n      }\r\n    }\r\n  }\r\n  .price {\r\n    height: 40px;\r\n    line-height: 40px;\r\n    .now-price {\r\n      color: red;\r\n      font-size: 20px;\r\n      margin-right: 10px;\r\n      margin-left: 5px;\r\n    }\r\n    .pre-price {\r\n      text-decoration-line: line-through;\r\n    }\r\n    .sales {\r\n      float: right;\r\n      color: gray;\r\n      margin-right: 5px;\r\n      height: 100%;\r\n    }\r\n  }\r\n  .content {\r\n    font-size: 18px;\r\n  }\r\n  .promise {\r\n    height: 30px;\r\n    line-height: 30px;\r\n    background-color: #eee;\r\n    margin-top: 6px;\r\n    span {\r\n      margin: 0 2px;\r\n    }\r\n    .right {\r\n      float: right;\r\n    }\r\n  }\r\n  .discuss {\r\n    .discuss-nav {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      padding: 5px;\r\n    }\r\n    .items {\r\n      padding: 5px;\r\n      .top {\r\n        height: 30px;\r\n        img {\r\n          height: 20px;\r\n        }\r\n        span {\r\n          font-size: 18px;\r\n          margin: 0 5px;\r\n        }\r\n      }\r\n      .bottom {\r\n        margin-top: 5px;\r\n        span {\r\n          color: gray;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .desc {\r\n    width: 100%;\r\n    overflow: scroll;\r\n    ::v-deep img {\r\n      display: block;\r\n      width: 100% !important;\r\n    }\r\n  }\r\n  .page-bottom {\r\n    height: 50px;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=5c808473&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=5c808473&prod&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5c808473\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","$event","$router","go","push","_v","cartTotalGoods","_s","_e","pushCart","pushBuy","showTitle","model","value","show","callback","$$v","expression","goodsList","goods_image","goods_price_min","stock_total","goodsCount","addCart","buyNow","_l","goods_images","item","key","file_id","external_url","goods_sales","goods_name","discussList","limit","comment_id","user","avatar_url","defaultImg","nick_name","score","content","create_time","domProps","staticRenderFns","getProductDetail","goodsId","request","get","params","getDiscussData","data","dodoti","methods","isToken","token","$dialog","confirm","title","message","confirmButtonText","then","path","query","backUrl","$route","fullPath","catch","name","mixins","loginConfirm","rate","components","CountBoxVue","created","id","res","detail","discussRes","list","console","log","$store","state","userInfo","goodsSku","skuList","goods_sku_id","getCartData","cartTotal","$toast","mode","goods_id","goodsSkuId","goodsNum","component"],"sourceRoot":""}