"use strict";(self["webpackChunksmart_shopping"]=self["webpackChunksmart_shopping"]||[]).push([[213],{4213:function(s,t,a){a.r(t),a.d(t,{default:function(){return p}});var o=function(){var s=this,t=s._self._c;return t("div",{staticClass:"pay"},[t("van-nav-bar",{attrs:{fixed:"",title:"订单结算台","left-arrow":""},on:{"click-left":function(t){return s.$router.go(-1)}}}),t("div",{staticClass:"address"},[t("div",{staticClass:"left-icon"},[t("van-icon",{attrs:{name:"logistics"}})],1),s.selAddress?t("div",{staticClass:"info"},[t("div",{staticClass:"info-content"},[t("span",{staticClass:"name"},[s._v(s._s(s.selAddress.name))]),t("span",{staticClass:"mobile"},[s._v(s._s(s.selAddress.phone))])]),t("div",{staticClass:"info-address"},[s._v(s._s(s.longAddress))])]):t("div",{staticClass:"info"},[s._v("请选择配送地址")]),t("div",{staticClass:"right-icon"},[t("van-icon",{attrs:{name:"arrow"}})],1)]),t("div",{staticClass:"pay-list"},[t("div",{staticClass:"list"},s._l(s.goodsList,(function(a){return t("div",{key:a.goods_id,staticClass:"goods-item"},[t("div",{staticClass:"left"},[t("img",{attrs:{src:a.goods_image,alt:""}})]),t("div",{staticClass:"right"},[t("p",{staticClass:"tit text-ellipsis-2"},[s._v(" "+s._s(a.goods_name)+" ")]),t("p",{staticClass:"info"},[t("span",{staticClass:"count"},[s._v("x"+s._s(a.total_num))]),t("span",{staticClass:"price"},[s._v("¥"+s._s(a.goods_price_min))])])])])})),0),t("div",{staticClass:"flow-num-box"},[t("span",[s._v("共 "+s._s(s.allInfo.order.orderTotalNum)+" 件商品，合计：")]),t("span",{staticClass:"money"},[s._v("￥"+s._s(s.allInfo.order.orderTotalPrice))])]),t("div",{staticClass:"pay-detail"},[t("div",{staticClass:"pay-cell"},[t("span",[s._v("订单总金额：")]),t("span",{staticClass:"red"},[s._v("￥"+s._s(s.allInfo.order.orderTotalPrice))])]),s._m(0),t("div",{staticClass:"pay-cell"},[t("span",[s._v("配送费用：")]),t("span",{staticClass:"red"},[s._v("+￥0.00")])])]),t("div",{staticClass:"pay-way"},[t("span",{staticClass:"tit"},[s._v("支付方式")]),t("div",{staticClass:"pay-cell"},[t("span",[t("van-icon",{attrs:{name:"balance-o"}}),s._v("余额支付（可用 ¥"+s._s(s.allInfo.personal.balance)+" 元）")],1),t("span",{staticClass:"red"},[t("van-icon",{attrs:{name:"passed"}})],1)])]),s._m(1)]),t("div",{staticClass:"footer-fixed"},[t("div",{staticClass:"left"},[s._v("实付款："),t("span",[s._v("￥"+s._s(s.allInfo.order.orderTotalPrice))])]),t("div",{staticClass:"tipsbtn",on:{click:s.toPay}},[s._v("提交订单")])])],1)},i=[function(){var s=this,t=s._self._c;return t("div",{staticClass:"pay-cell"},[t("span",[s._v("优惠券：")]),t("span",[s._v("无优惠券可用")])])},function(){var s=this,t=s._self._c;return t("div",{staticClass:"buytips"},[t("textarea",{attrs:{placeholder:"选填：买家留言（50字内）",name:"",id:"",cols:"30",rows:"10"}})])}],e=a(5720);const r=()=>e.A.get("/address/list"),d=(s,t)=>e.A.get("/checkout/order",{params:{mode:s,delivery:10,shopId:0,couponId:0,isUsePoints:0,...t}}),n=(s,t)=>e.A.post("/checkout/submit",{mode:s,delivery:10,couponId:0,isUsePoints:0,payType:10,...t});var l={name:"PayIndex",data(){return{addressList:[],goodsList:[],allInfo:{order:{},personal:{}}}},computed:{selAddress(){return this.addressList[0]},longAddress(){const s=this.selAddress.region;return s.province+s.city+s.region+this.selAddress.detail},orderMode(){return this.$route.query.mode},orderCardIds(){return this.$route.query.cartIds},orderCardList(){const s={goodsId:this.$route.query.goodsId,goodsSkuId:this.$route.query.goodsSkuId,goodsNum:this.$route.query.goodsNum};return s}},created(){this.getPayData(),this.getPayGoodsData()},methods:{async getPayData(){const s=await r();this.addressList=s.data.list,console.log(s)},async getPayGoodsData(){if("cart"===this.orderMode){const s=await d(this.orderMode,{cartIds:this.orderCardIds});return console.log(s),this.allInfo=s.data,void(this.goodsList=s.data.order.goodsList)}if("buyNow"===this.orderMode){const s=await d(this.orderMode,this.orderCardList);console.log(s),this.allInfo=s.data,this.goodsList=s.data.order.goodsList}},async toPay(){"cart"===this.orderMode?await n(this.orderMode,{cartIds:this.orderCardIds}):"buyNow"===this.orderMode&&await n(this.orderMode,this.orderCardList),this.$router.replace("/myorder"),this.$toast.success("购买成功")}}},c=l,v=a(1656),u=(0,v.A)(c,o,i,!1,null,"0295f35c",null),p=u.exports}}]);
//# sourceMappingURL=213.10d3d7e6.js.map